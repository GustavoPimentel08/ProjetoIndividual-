<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário - The G Method.</title>
    <link rel="stylesheet" href="./css/formulario.css">
    <link rel="shortcut icon" href="./fotos/favicon.png" type="image/x-icon">
</head>

<body onload="onloadEsconder()">

    <header id="header_lolo">
        <div class="container">
            <h2>Formulário</h2>
            <img class="foto-header" src="./fotos/apenas bandeiras.png" alt="Bandeiras">
        </div>
        <img class="bmw" src="./fotos/bmw.png" alt="Imagem BMW">
    </header>

    <section class="info_formulario" id="info_formulario">
        <div class="div_inicio" id="div_inicio">
            <h1>Seja Bem-vindo(a) ao site The G Method.</h1>
            <p class="p1">Agora você fará um formulário para descobrir qual o seu Perfil de Aprendizagem de Idiomas!</p>
            <p class="p1">Clique no botão iniciar para começar o formulário.</p>
            <p class="p2">Após finalizar, você será redirecionado para a Área de Membros.</p>
            <button class="btn btn1" id="btnIniciarQuiz" onclick="iniciarQuiz()">Iniciar</button>
        </div>
    </section>

    <section class="formulario_onepage" id="formulario_onepage" style="display: none;">
        <div class="central">
            <h1>Descubra seu perfil de aprendizagem!</h1>

            <div class="pergunta">
                <h2>1. Qual o seu Perfil de Aprendizagem de Idiomas?</h2>
                <p>Qual a melhor maneira de aprender um novo idioma para você?</p>
                <label><input type="radio" name="perfil" id="pergunta1_1" value="Visual"> Visual</label><br>
                <label><input type="radio" name="perfil" id="pergunta1_2" value="Auditivo"> Auditivo</label><br>
                <label><input type="radio" name="perfil" id="pergunta1_3" value="Leitura/Escrita">
                    Leitura/Escrita</label><br>
                <label><input type="radio" name="perfil" id="pergunta1_4" value="Cinestésico"> Cinestésico</label>

                <p class="explicacao"><strong>Visual:</strong> Pessoas com esse perfil aprendem melhor com
                    experiências visuais, assistindo series, desenhos, filmes. Aprendem "Assistindo coisas".</p><br>
                <p class="explicacao"><strong>Auditivo:</strong> Pessoas com esse perfil aprendem melhor com
                    experiências auditivas, escutando músicas, pod cast's ou até pessoas tendo dialógos. Aprendem
                    "Escutando".</p><br>
                <p class="explicacao"><strong>Leitura/Escrita:</strong> Pessoas com esse perfil aprendem melhor com
                    experiências de leitura, com livros físicos ou digitais e também preferem aprender escrevendo.
                    Aprendem "Lendo/Escrevendo".</p><br>
                <p class="explicacao"><strong>Cinestésico:</strong> Pessoas com esse perfil aprendem melhor com
                    experiências práticas, movimentos e interação física. Aprendem "fazendo".</p>

            </div>

            <div class="pergunta">
                <h2>2. Quais dos 5 pilares da fluência você acha mais desafiador?</h2>
                <p>Você pode escolher até duas opções:</p>
                <label><input type="checkbox" name="pilares" id="pergunta2_1" value="Vocabulário"> • Fala -
                    Speaking</label><br>
                <label><input type="checkbox" name="pilares" id="pergunta2_2" value="Gramática"> • Audição -
                    listening</label><br>
                <label><input type="checkbox" name="pilares" id="pergunta2_3" value="Conversar"> • Leitura -
                    Reading</label><br>
                <label><input type="checkbox" name="pilares" id="pergunta2_4" value="Ouvir"> • Escrita -
                    Writing</label><br>
                <label><input type="checkbox" name="pilares" id="pergunta2_5" value="Ler e Escrever"> • Interpretação -
                    Interpretation</label><br>

                <label for="justificativa">
                    <p>Justifique sua resposta:</p>
                </label>
                <textarea id="justificativa" rows="4" cols="50" placeholder="Digite aqui..." class="input1"></textarea>
            </div>

            <div class="pergunta">
                <h2>3. Como você prefere estudar um novo idioma?</h2>
                <label><input type="radio" name="estudo" id="pergunta3_1" value="Em grupo"> Em grupo</label><br>
                <label><input type="radio" name="estudo" id="pergunta3_2" value="Sozinho(a)"> Sozinho(a)</label><br>
                <label><input type="radio" name="estudo" id="pergunta3_3" value="Não tenho base"> Nunca estudei nenhum
                    além
                    do meu idioma nativo</label><br>
            </div>

            <button class="btn btn1" onclick="enviarRespostas()">Enviar Respostas</button>

        </div>
    </section>

    <script>
        var pergunta1 = [];
        var pergunta2 = [];
        var pergunta3 = [];

        var pergunta1_1 = pergunta1_1.value;
        var pergunta1_2 = pergunta1_2.value;
        var pergunta1_3 = pergunta1_3.value;
        var pergunta1_4 = pergunta1_4.value;

        var pergunta2_1 = pergunta2_1.value;
        var pergunta2_2 = pergunta2_2.value;
        var pergunta2_3 = pergunta2_3.value;
        var pergunta2_4 = pergunta2_4.value;
        var pergunta2_5 = pergunta2_5.value;

        var pergunta3_1 = pergunta3_1.value;
        var pergunta3_2 = pergunta3_2.value;
        var pergunta3_3 = pergunta3_3.value;


        function onloadEsconder() {
            document.getElementById('info_formulario').style.display = "flex";
            document.getElementById('formulario_onepage').style.display = "none";
        }

        function iniciarQuiz() {
            document.getElementById('info_formulario').style.display = "none";
            document.getElementById('formulario_onepage').style.display = "flex";
        }


        function enviarRespostas() {

            //Pergunta 1 - Vai adicionar na lista para ir para o BD
            if (pergunta1_1 != "") {
                pergunta1.push(pergunta1_1)
            }
            if (pergunta1_2 != "") {
                pergunta1.push(pergunta1_2)
            }
            if (pergunta1_3 != "") {
                pergunta1.push(pergunta1_2)
            }
            if (pergunta1_4 != "") {
                pergunta1.push(pergunta1_2)
            }

            //Pergunta 2 - Vai adicionar na lista para ir para o BD
            if (pergunta2_1 != "") {
                pergunta2.push(pergunta2_1)
            }
            if (pergunta2_2 != "") {
                pergunta2.push(pergunta2_2)
            }
            if (pergunta2_3 != "") {
                pergunta2.push(pergunta2_3)
            }
            if (pergunta2_4 != "") {
                pergunta2.push(pergunta2_4)
            }
            if (pergunta2_5 != "") {
                pergunta2.push(pergunta2_5)
            }

            //Pergunta 3 - Vai adicionar na lista para ir para o BD
            if (pergunta3_1 != "") {
                pergunta3.push(pergunta3_1)
            }
            if (pergunta3_2 != "") {
                pergunta3.push(pergunta3_2)
            }
            if (pergunta3_3 != "") {
                pergunta3.push(pergunta3_2)
            }


            fetch("/formulario/inserir", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.js
                    pergunta1Server: pergunta1,
                    pergunta2Server: pergunta2,
                    pergunta3Server: pergunta3,
                    // idEmpresaVincularServer: idEmpresaVincular
                }),
            })
                .then(function (resposta) { // retorno das informaçoes 
                    console.log("resposta: ", resposta);

                    if (resposta.ok) {

                        mensagem_erro.innerHTML =
                            "Inserção realizada com sucesso! Redirecionando para Area de membros...";
                        console.log("Pergunta1; ", pergunta1);
                        console.log("Pergunta1; ", pergunta2);
                        console.log("Pergunta1; ", pergunta3);

                    } else {
                        throw "Houve um erro ao tentar realizar a inserção! / SOS";
                    }
                })
                .catch(function (resposta) {
                    console.log(`#ERRO: ${resposta}`);
                });

            alert("Respostas enviadas com sucesso!");
            window.location.href = "./login.html";
        }

    </script>
</body>

</html>